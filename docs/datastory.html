<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>yschin03.github.io - Data Story</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">yschin03.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./myprojects.html" rel="" target="">
 <span class="menu-text">My Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./datastory.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data Story</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link active" data-scroll-target="#data-cleaning">Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#names-and-meanings-of-variables-in-cleaned-dataset" id="toc-names-and-meanings-of-variables-in-cleaned-dataset" class="nav-link" data-scroll-target="#names-and-meanings-of-variables-in-cleaned-dataset">Names and Meanings of Variables in Cleaned Dataset</a></li>
  </ul></li>
  <li><a href="#data-visualisation" id="toc-data-visualisation" class="nav-link" data-scroll-target="#data-visualisation">Data Visualisation</a>
  <ul class="collapse">
  <li><a href="#overview-statistics" id="toc-overview-statistics" class="nav-link" data-scroll-target="#overview-statistics"><u>1.0 Overview Statistics</u></a></li>
  <li><a href="#number-of-songs-and-artists" id="toc-number-of-songs-and-artists" class="nav-link" data-scroll-target="#number-of-songs-and-artists">1.1 Number of songs and artists</a></li>
  <li><a href="#songs-per-year" id="toc-songs-per-year" class="nav-link" data-scroll-target="#songs-per-year">1.2 Songs Per Year</a></li>
  <li><a href="#songs-per-artist---top-100-artists" id="toc-songs-per-artist---top-100-artists" class="nav-link" data-scroll-target="#songs-per-artist---top-100-artists">1.3 Songs Per Artist - Top 100 Artists</a></li>
  <li><a href="#top-25-songs-based-on-popularity" id="toc-top-25-songs-based-on-popularity" class="nav-link" data-scroll-target="#top-25-songs-based-on-popularity">1.4 Top 25 Songs Based On Popularity</a></li>
  <li><a href="#how-does-the-explicit-value-of-a-song-affect-its-popularity" id="toc-how-does-the-explicit-value-of-a-song-affect-its-popularity" class="nav-link" data-scroll-target="#how-does-the-explicit-value-of-a-song-affect-its-popularity"><u>2.0 How does the explicit value of a song affect its popularity?</u></a></li>
  <li><a href="#songs-containing-explicit-content" id="toc-songs-containing-explicit-content" class="nav-link" data-scroll-target="#songs-containing-explicit-content">2.1 Songs Containing Explicit Content</a></li>
  <li><a href="#songs-containing-explicit-content-by-year" id="toc-songs-containing-explicit-content-by-year" class="nav-link" data-scroll-target="#songs-containing-explicit-content-by-year">2.2 Songs Containing Explicit Content By Year</a></li>
  <li><a href="#how-does-explicit-level-of-song-impact-song-popularity-categorical-variable" id="toc-how-does-explicit-level-of-song-impact-song-popularity-categorical-variable" class="nav-link" data-scroll-target="#how-does-explicit-level-of-song-impact-song-popularity-categorical-variable">2.3 How Does Explicit Level of Song Impact Song Popularity? (Categorical Variable)</a></li>
  <li><a href="#how-does-different-song-attributes-affect-popularity-numeric-variables" id="toc-how-does-different-song-attributes-affect-popularity-numeric-variables" class="nav-link" data-scroll-target="#how-does-different-song-attributes-affect-popularity-numeric-variables"><u>3.0 How does different song attributes affect popularity? (Numeric variables)</u></a></li>
  <li><a href="#distribution-of-different-song-attributes" id="toc-distribution-of-different-song-attributes" class="nav-link" data-scroll-target="#distribution-of-different-song-attributes">3.1 Distribution of Different Song Attributes</a></li>
  <li><a href="#individual-analysis-of-impact-of-song-attributes-on-popularity" id="toc-individual-analysis-of-impact-of-song-attributes-on-popularity" class="nav-link" data-scroll-target="#individual-analysis-of-impact-of-song-attributes-on-popularity">3.2 Individual Analysis of Impact of Song Attributes on Popularity</a></li>
  <li><a href="#effect-of-tempo-on-popularity" id="toc-effect-of-tempo-on-popularity" class="nav-link" data-scroll-target="#effect-of-tempo-on-popularity">3.2.1 Effect of Tempo on Popularity</a></li>
  <li><a href="#effect-of-speechiness-on-popularity" id="toc-effect-of-speechiness-on-popularity" class="nav-link" data-scroll-target="#effect-of-speechiness-on-popularity">3.2.2 Effect of Speechiness on Popularity</a></li>
  <li><a href="#effect-of-loudness-on-popularity" id="toc-effect-of-loudness-on-popularity" class="nav-link" data-scroll-target="#effect-of-loudness-on-popularity">3.2.3 Effect of Loudness on Popularity</a></li>
  <li><a href="#effect-of-acousticness-on-popularity" id="toc-effect-of-acousticness-on-popularity" class="nav-link" data-scroll-target="#effect-of-acousticness-on-popularity">3.2.4 Effect of Acousticness on Popularity</a></li>
  <li><a href="#effect-of-valence-on-popularity" id="toc-effect-of-valence-on-popularity" class="nav-link" data-scroll-target="#effect-of-valence-on-popularity">3.2.3 Effect of Valence on Popularity</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Story</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="data-cleaning" class="level1">
<h1>Data Cleaning</h1>
<p>I have cleaned the dataset by removing duplicate and NA values, as well as selecting only the relevant columns required for my data analysis.</p>
<p>The original dataset had songs spanning from year 1998 to year 2020, but was not representative of the top songs from the entire year of 1998 as well as year 2020. This is because the data only considered songs from the end of 1998 and the start of 2020, instead of the whole year. To ensure that there are no sudden abnormalities in data trends, I have narrowed the data to cover only songs between years 1999 to 2019.</p>
<p>You can view both original and cleaned datasets here:</p>

<iframe height="400" width="100%" frameborder="no" src="https://edwxgo-yin0shuen-chin.shinyapps.io/App1/"> </iframe>
<section id="names-and-meanings-of-variables-in-cleaned-dataset" class="level2">
<h2 class="anchored" data-anchor-id="names-and-meanings-of-variables-in-cleaned-dataset">Names and Meanings of Variables in Cleaned Dataset</h2>
<p>“artist” refers to the name of the Artist.</p>
<p>“song” refers to the name of the song track.</p>
<p>“explicit” refers to whether the lyrics or content of a song or a music video contain one or more of the criteria which could be considered offensive or unsuitable for children.</p>
<p>“year” refers to the release year of the track.</p>
<p>“popularity” refers to the popularity level of the track. The higher the value the more popular the song is.</p>
<p>“speechiness” refers to the presence of spoken words in a sound track. The greater the presence of speech-like qualities, the closer to 1.0 the attribute value. Values above 0.66 describe tracks that are likely made entirely of spoken words. Values between 0.33 and 0.66 describe tracks that may contain both music and speech, either in sections or layered, including such cases as rap music. Values below 0.33 most likely represent music and other non-speech-like tracks.</p>
<p>“tempo” refers to the overall estimated tempo of a track in beats per minute (BPM). In musical terminology, tempo is the speed or pace of a given piece and derives directly from the average beat duration.</p>
<p>“loudness” refers to the overall loudness of a track in decibels (dB). Loudness values are averaged across the entire track and are useful for comparing relative loudness of tracks. Loudness is the quality of a sound that is the primary psychological correlate of physical strength (amplitude). Values typically range between -60 and 0 db.</p>
<p>“acousticness” refers to the confidence measure from 0.0 to 1.0 of whether the track is acoustic. 1.0 represents high confidence the track is acoustic.</p>
<p>“valence” refers to the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g.&nbsp;happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g.&nbsp;sad, depressed, angry). It measures from 0.0 to 1.0.</p>
</section>
</section>
<section id="data-visualisation" class="level1">
<h1>Data Visualisation</h1>
<p>Below, I will be analysing various song properties and their relationships with song popularity.</p>
<p>The main question I wish to answer is <strong>“What determines the extent of popularity of songs in Spotify?”</strong></p>
<hr>
<section id="overview-statistics" class="level2">
<h2 class="anchored" data-anchor-id="overview-statistics"><u>1.0 Overview Statistics</u></h2>
<p>Here is a breakdown of the general statistics for the cleaned dataset.</p>
</section>
<section id="number-of-songs-and-artists" class="level2">
<h2 class="anchored" data-anchor-id="number-of-songs-and-artists">1.1 Number of songs and artists</h2>
<p>Number of artists:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 832</code></pre>
</div>
</div>
<p>Number of songs:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1937</code></pre>
</div>
</div>
</section>
<section id="songs-per-year" class="level2">
<h2 class="anchored" data-anchor-id="songs-per-year">1.2 Songs Per Year</h2>
<p>The bar plot below consolidates the number of songs released for each year, between 1999 and 2019. Hover over each respective bar to see the individual values.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-5706a7410006205a2b1a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-5706a7410006205a2b1a">{"x":{"data":[{"orientation":"v","width":[0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095,0.90000000000009095],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[38,71,106,86,91,95,101,93,90,91,82,103,96,113,87,100,93,98,110,104,89],"text":["year: 1999<br />n:  38","year: 2000<br />n:  71","year: 2001<br />n: 106","year: 2002<br />n:  86","year: 2003<br />n:  91","year: 2004<br />n:  95","year: 2005<br />n: 101","year: 2006<br />n:  93","year: 2007<br />n:  90","year: 2008<br />n:  91","year: 2009<br />n:  82","year: 2010<br />n: 103","year: 2011<br />n:  96","year: 2012<br />n: 113","year: 2013<br />n:  87","year: 2014<br />n: 100","year: 2015<br />n:  93","year: 2016<br />n:  98","year: 2017<br />n: 110","year: 2018<br />n: 104","year: 2019<br />n:  89"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(147,112,219,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":51.872146118721474,"l":37.260273972602747},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Number of songs per year","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1997.5049999999999,2020.4950000000001],"tickmode":"array","ticktext":["1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"categoryorder":"array","categoryarray":["1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5.6500000000000004,118.65000000000001],"tickmode":"array","ticktext":["0","30","60","90"],"tickvals":[0,30,60.000000000000007,90],"categoryorder":"array","categoryarray":["0","30","60","90"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Number of songs","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"20a01e38d02d":{"x":{},"y":{},"type":"bar"}},"cur_data":"20a01e38d02d","visdat":{"20a01e38d02d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p style="color:#6200EA;">
Findings:
</p>
<p style="color:#6200EA;">
2012 has the highest number of songs, at 113 songs.
</p>
</section>
<section id="songs-per-artist---top-100-artists" class="level2">
<h2 class="anchored" data-anchor-id="songs-per-artist---top-100-artists">1.3 Songs Per Artist - Top 100 Artists</h2>
<p>The interactive bar chart below consolidates data on the number of songs released by artists featured in the dataset of top Spotify tracks, arranged from artists with the highest number of songs featured to lowest.</p>
<p>Adjust the slider to select your preferred number of artists to show in the chart.</p>

<iframe height="400" width="100%" frameborder="no" src="https://edwxgo-yin0shuen-chin.shinyapps.io/App2/"> </iframe>
<p style="color:#6200EA;">
Findings:
</p>
<p style="color:#6200EA;">
The artist with the most number of featured songs is Rihanna, with 25 songs.
</p>
</section>
<section id="top-25-songs-based-on-popularity" class="level2">
<h2 class="anchored" data-anchor-id="top-25-songs-based-on-popularity">1.4 Top 25 Songs Based On Popularity</h2>
<p>Line graph features the top 25 songs from the dataset, arranged in descending order based on popularity level.</p>
<p>Hover over each point to its individual popularity level out of 100.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9d72eac20a08ae281897" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9d72eac20a08ae281897">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],"y":[89,88,87,86,86,86,85,85,85,85,85,85,84,84,84,84,84,84,84,84,84,84,84,83,83],"text":["popularity: 89","popularity: 88","popularity: 87","popularity: 86","popularity: 86","popularity: 86","popularity: 85","popularity: 85","popularity: 85","popularity: 85","popularity: 85","popularity: 85","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 83","popularity: 83"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"Song","yaxis":"Popularity","hoverinfo":"text","frame":null,"title":"Top 25 Songs"},{"x":[1,2,3,5,6,4,7,10,9,12,11,8,23,15,13,22,19,20,18,14,17,16,21,24,25],"y":[89,88,87,86,86,86,85,85,85,85,85,85,84,84,84,84,84,84,84,84,84,84,84,83,83],"text":["popularity: 89","popularity: 88","popularity: 87","popularity: 86","popularity: 86","popularity: 86","popularity: 85","popularity: 85","popularity: 85","popularity: 85","popularity: 85","popularity: 85","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 84","popularity: 83","popularity: 83"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)"}},"hoveron":"points","showlegend":false,"xaxis":"Song","yaxis":"Popularity","hoverinfo":"text","frame":null,"title":"Top 25 Songs"}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":262.28310502283108,"l":37.260273972602747},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Top 25 Songs Based on Popularity","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,25.600000000000001],"tickmode":"array","ticktext":["Sweater Weather","Another Love","Without Me","lovely (with Khalid)","The Real Slim Shady","Wait a Minute!","'Till I Collapse","Circles","Daddy Issues","Locked out of Heaven","Perfect","The Nights","All of Me","Bored","Do I Wanna Know?","Lost in the Fire (feat. The Weeknd)","Lucid Dreams","No Lie","One Dance","Shape of You","Someone You Loved","The Hills","Why'd You Only Call Me When You're High?","In the End","Stan"],"tickvals":[1,2,3,4,5,6,7,7.9999999999999991,9,10,11,12,13,14.000000000000002,15,16,17,18,19,20,21,22,23,24,25],"categoryorder":"array","categoryarray":["Sweater Weather","Another Love","Without Me","lovely (with Khalid)","The Real Slim Shady","Wait a Minute!","'Till I Collapse","Circles","Daddy Issues","Locked out of Heaven","Perfect","The Nights","All of Me","Bored","Do I Wanna Know?","Lost in the Fire (feat. The Weeknd)","Lucid Dreams","No Lie","One Dance","Shape of You","Someone You Loved","The Hills","Why'd You Only Call Me When You're High?","In the End","Stan"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Song","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[81.599999999999994,90.400000000000006],"tickmode":"array","ticktext":["82","84","86","88","90"],"tickvals":[82,84,86,88,90],"categoryorder":"array","categoryarray":["82","84","86","88","90"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Popularity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"20a05260cd85":{"x":{},"y":{},"type":"scatter"},"20a051550103":{"x":{},"y":{}}},"cur_data":"20a05260cd85","visdat":{"20a05260cd85":["function (y) ","x"],"20a051550103":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p style="color:#6200EA;">
Findings:
</p>
<p style="color:#6200EA;">
The most popular song is Sweater Weather, with a popularity rating of 89 out of 100.
</p>
</section>
<section id="how-does-the-explicit-value-of-a-song-affect-its-popularity" class="level2">
<h2 class="anchored" data-anchor-id="how-does-the-explicit-value-of-a-song-affect-its-popularity"><u>2.0 How does the explicit value of a song affect its popularity?</u></h2>
</section>
<section id="songs-containing-explicit-content" class="level2">
<h2 class="anchored" data-anchor-id="songs-containing-explicit-content">2.1 Songs Containing Explicit Content</h2>
<p>This simple pie chart below clearly illustrates the percentage of songs which contain explicit content.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="datastory_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p style="color:#6200EA;">
Findings:
</p>
<p style="color:#6200EA;">
27.6%, or the minority of the songs in this dataset, are explicit.
</p>
</section>
<section id="songs-containing-explicit-content-by-year" class="level2">
<h2 class="anchored" data-anchor-id="songs-containing-explicit-content-by-year">2.2 Songs Containing Explicit Content By Year</h2>
<p>The area plot below illustrates the relationship between the year of song published and explicit songs.</p>
<p>Hover over each point to see its individual values.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-807299af1beda8bc19ea" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-807299af1beda8bc19ea">{"x":{"data":[{"x":[1998.98,1999,1999.02,1999.98,2000,2000.02,2000.98,2001,2001.02,2001.98,2002,2002.02,2002.98,2003,2003.02,2003.98,2004,2004.02,2004.98,2005,2005.02,2005.98,2006,2006.02,2006.98,2007,2007.02,2007.98,2008,2008.02,2008.98,2009,2009.02,2009.98,2010,2010.02,2010.98,2011,2011.02,2011.98,2012,2012.02,2012.98,2013,2013.02,2013.98,2014,2014.02,2014.98,2015,2015.02,2015.98,2016,2016.02,2016.98,2017,2017.02,2017.98,2018,2018.02,2018.98,2019,2019.02,2019.02,2019.02,2019,2018.98,2018.02,2018,2017.98,2017.02,2017,2016.98,2016.02,2016,2015.98,2015.02,2015,2014.98,2014.02,2014,2013.98,2013.02,2013,2012.98,2012.02,2012,2011.98,2011.02,2011,2010.98,2010.02,2010,2009.98,2009.02,2009,2008.98,2008.02,2008,2007.98,2007.02,2007,2006.98,2006.02,2006,2005.98,2005.02,2005,2004.98,2004.02,2004,2003.98,2003.02,2003,2002.98,2002.02,2002,2001.98,2001.02,2001,2000.98,2000.02,2000,1999.98,1999.02,1999,1998.98,1998.98],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,37.239999999999782,48.760000000000218,49,48.760000000000218,37.239999999999782,37,36.880000000000109,31.119999999999891,31,30.940000000000055,28.059999999999945,28,27.820000000000164,19.179999999999836,19,19,19,19,19,19,19,19.119999999999891,24.880000000000109,25,24.960000000000036,23.039999999999964,23,22.980000000000018,22.019999999999982,22,21.980000000000018,21.019999999999982,21,21.019999999999982,21.980000000000018,22,22.079999999999927,25.920000000000073,26,26.039999999999964,27.960000000000036,28,28.139999999999873,34.860000000000127,35,34.740000000000236,22.259999999999764,22,22.119999999999891,27.880000000000109,28,27.900000000000091,23.099999999999909,23,22.7800000000002,12.2199999999998,12,11.920000000000073,8.0799999999999272,8,0,0],"text":"year: 1999<br />n: 8","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,192,203,0.5)","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[8,12,23,28,22,35,28,26,22,21,22,23,25,19,19,19,28,31,37,49,37],"text":["year: 1999<br />n:  8","year: 2000<br />n: 12","year: 2001<br />n: 23","year: 2002<br />n: 28","year: 2003<br />n: 22","year: 2004<br />n: 35","year: 2005<br />n: 28","year: 2006<br />n: 26","year: 2007<br />n: 22","year: 2008<br />n: 21","year: 2009<br />n: 22","year: 2010<br />n: 23","year: 2011<br />n: 25","year: 2012<br />n: 19","year: 2013<br />n: 19","year: 2014<br />n: 19","year: 2015<br />n: 28","year: 2016<br />n: 31","year: 2017<br />n: 37","year: 2018<br />n: 49","year: 2019<br />n: 37"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":1,"size":3.7795275590551185,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":37.260273972602747},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Number of explicit songs by year","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1997.9780000000001,2020.0219999999999],"tickmode":"array","ticktext":["2000","2005","2010","2015","2020"],"tickvals":[2000,2005,2010,2015,2020],"categoryorder":"array","categoryarray":["2000","2005","2010","2015","2020"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.4500000000000002,51.450000000000003],"tickmode":"array","ticktext":["0","10","20","30","40","50"],"tickvals":[0,10,20,30.000000000000004,40,50],"categoryorder":"array","categoryarray":["0","10","20","30","40","50"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Total songs","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"20a059264b90":{"x":{},"y":{},"type":"scatter"},"20a0612b08a9":{"x":{},"y":{}}},"cur_data":"20a059264b90","visdat":{"20a059264b90":["function (y) ","x"],"20a0612b08a9":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p style="color:#6200EA;">
Findings:
</p>
<p style="color:#6200EA;">
2018 contained the most number of explicit songs, at 49 songs, while 1999 contained the least, at 8 songs.
</p>
</section>
<section id="how-does-explicit-level-of-song-impact-song-popularity-categorical-variable" class="level2">
<h2 class="anchored" data-anchor-id="how-does-explicit-level-of-song-impact-song-popularity-categorical-variable">2.3 How Does Explicit Level of Song Impact Song Popularity? (Categorical Variable)</h2>
<p>The box plots below visualises the popularity of songs based on whether they are explicit or not.</p>
<p>Hover over each plot to see its individual values.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-a2fe173e1c786ccf1323" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a2fe173e1c786ccf1323">{"x":{"data":[{"x":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"y":[83,68,68,61,76,54,68,77,55,57,49,57,61,51,52,63,82,63,59,4,60,69,59,61,61,76,75,72,78,45,69,74,70,70,57,68,60,77,68,0,68,67,68,77,48,54,76,68,61,80,66,77,67,72,73,75,63,61,69,64,54,0,80,0,73,77,1,66,0,67,67,74,62,66,73,71,54,58,59,67,62,64,58,62,73,55,57,59,0,55,69,68,63,58,62,73,61,58,68,75,51,57,71,59,63,0,59,71,61,62,53,68,68,76,66,55,52,70,73,59,53,73,71,62,52,76,73,57,46,65,63,57,1,60,72,68,85,71,59,73,72,67,61,61,63,60,49,74,63,64,62,76,71,69,61,72,0,61,67,0,0,68,68,67,64,74,73,73,61,63,81,78,74,68,3,57,47,61,77,69,80,84,55,81,76,52,71,1,57,68,72,74,67,68,57,70,61,73,68,56,75,62,61,64,39,57,56,67,59,61,0,66,72,50,75,74,79,16,0,72,82,61,51,76,42,66,75,77,88,73,74,63,53,74,41,0,56,75,0,76,68,79,56,75,70,68,69,63,77,73,82,83,59,79,0,0,47,77,67,82,74,42,1,0,76,75,71,72,69,69,62,75,0,77,54,75,64,61,0,65,55,59,71,64,4,74,62,74,48,0,0,83,72,67,56,78,0,79,78,68,66,0,0,82,59,58,57,72,81,77,0,47,79,79,64,69,61,60,47,69,0,62,70,61,21,57,72,55,67,72,48,54,71,53,71,0,67,8,68,81,83,80,75,66,84,78,78,79,82,51,77,56,73,81,49,83,67,69,71,75,70,63,42,66,76,72,75,82,51,71,63,87,71,72,80,69,54,75,66,74,58,70,67,72,65,57,54,47,2,53,81,57,0,72,79,47,48,53,55,80,73,72,70,79,72,72,64,75,75,68,57,53,0,82,49,48,63,59,67,59,76,71,0,86,68,57,67,78,46,75,70,70,71,73,66,77,80,77,74,48,69,83,76,84,77,71,58,0,80,48,75,0,77,73,61,64,68,70,72,61,80,70,73,71,78,69,54,63,78,79,57,75,59,75,76,76,76,78,53,78,69,74,77,69,73,76,78,39,0,61,57,66,73,64,75,77,81,66,78,80,64,63,1,72,66,73,1,64,78,0,78,80,59,60,70,69,75,67,74,71,64,82,69,77,58,51,75,68,1,64,51,62,64,70],"hoverinfo":"y","type":"box","fillcolor":"rgba(70,130,180,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(51,51,51,1)","width":1.8897637795275593},"name":"Explicit","legendgroup":"Explicit","showlegend":true,"xaxis":"x","yaxis":"y","frame":null},{"x":[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"y":[77,79,66,78,65,75,61,68,75,77,1,56,55,62,61,53,64,73,64,61,83,65,62,70,54,72,69,81,54,47,65,49,58,52,58,59,55,56,61,55,54,66,36,62,68,43,59,64,52,47,60,55,63,57,59,65,67,65,0,58,52,0,60,61,58,78,55,70,66,55,55,58,59,56,70,64,78,52,51,49,57,54,68,62,65,60,54,56,54,60,70,64,68,65,77,64,69,65,73,76,70,1,73,68,1,74,78,77,62,71,69,62,53,76,53,51,65,54,54,57,63,43,71,64,56,0,50,78,76,74,50,42,73,57,69,63,55,52,60,50,0,67,48,61,67,65,55,63,47,54,75,54,64,26,53,58,58,67,58,63,1,61,46,56,60,69,60,58,64,53,56,68,46,0,65,66,64,54,74,0,2,48,0,69,0,79,68,58,69,61,30,62,56,65,45,61,63,61,78,75,72,64,27,67,62,69,69,60,53,53,40,66,0,54,59,60,43,66,61,46,70,42,52,60,74,59,47,57,61,73,75,82,53,68,49,45,48,65,43,26,2,80,58,57,53,40,55,42,35,63,45,24,64,62,62,32,53,61,65,54,68,52,56,79,70,60,63,69,79,70,75,63,58,57,73,60,65,50,64,57,45,47,56,64,63,40,40,60,58,56,64,72,68,60,70,74,63,76,50,68,70,56,66,61,59,35,79,69,72,59,79,57,59,72,47,62,73,36,59,57,54,76,3,81,63,73,61,68,48,50,0,58,61,58,52,57,77,70,58,78,69,62,71,17,48,60,68,61,60,59,67,49,51,57,79,0,38,57,58,67,60,73,57,60,48,76,54,65,67,57,69,76,60,64,44,58,56,45,47,36,63,68,72,30,68,63,74,67,55,81,77,74,80,79,78,11,53,56,52,56,60,68,68,59,63,81,56,53,58,42,66,61,72,67,74,56,74,71,53,67,55,70,70,61,33,69,63,37,68,68,49,45,56,76,65,68,65,57,0,67,61,74,65,47,61,57,63,64,77,56,56,58,64,72,62,46,58,85,0,57,43,55,72,61,70,0,56,62,74,77,55,55,76,59,59,71,0,59,57,75,65,56,61,69,72,59,77,64,79,80,72,74,28,67,58,67,54,59,68,60,57,68,64,71,1,67,61,0,80,65,74,66,82,62,63,74,69,75,57,72,73,72,76,69,59,66,48,56,42,65,63,77,65,41,63,52,52,1,61,52,38,58,77,50,64,56,60,1,65,80,66,46,59,54,1,73,60,71,1,62,54,63,71,52,67,0,58,71,77,65,66,71,69,71,55,71,56,65,67,59,76,82,78,74,39,71,73,74,69,79,69,48,64,59,57,55,39,58,68,59,74,73,75,63,57,73,76,80,67,72,68,78,1,72,65,60,0,69,0,42,57,73,69,50,49,46,57,49,69,59,1,65,80,75,74,57,49,0,37,0,75,0,45,72,0,67,48,68,62,63,69,76,63,75,35,56,70,57,62,67,21,0,59,46,62,76,2,67,64,54,72,61,76,61,49,69,0,73,75,81,79,76,0,78,70,71,80,52,43,78,65,73,65,64,51,0,68,64,64,59,52,74,72,80,71,0,70,79,77,68,68,66,73,66,76,63,71,67,0,0,80,66,66,62,74,45,61,70,65,63,55,78,57,76,65,69,63,76,74,2,63,70,59,76,61,77,71,65,52,78,73,63,46,57,78,69,69,66,79,60,68,76,59,2,79,0,62,57,53,58,73,0,68,64,79,75,80,73,70,77,65,67,70,66,72,63,59,1,61,0,57,74,71,73,77,56,69,76,70,34,52,74,72,71,64,0,72,69,77,0,65,51,68,78,79,1,72,65,66,0,73,84,60,57,75,57,27,66,69,67,0,47,0,75,0,0,57,71,59,0,67,55,51,53,70,62,67,50,62,79,66,59,67,76,80,73,62,46,60,51,0,63,72,53,79,77,82,74,0,77,58,65,63,77,74,69,74,74,63,71,62,74,0,72,82,64,46,69,71,69,0,65,67,73,70,63,6,67,63,68,0,62,58,63,69,69,78,75,73,3,35,77,2,81,89,68,59,79,0,75,65,65,57,83,85,60,58,77,70,69,71,0,68,81,66,76,64,55,71,61,59,75,62,62,67,64,2,72,50,50,81,73,72,56,79,0,61,57,73,56,67,76,49,68,64,76,77,0,77,80,69,70,73,78,79,0,72,82,46,0,67,66,56,66,74,0,73,76,67,83,57,32,74,83,78,79,0,80,76,74,48,55,76,74,74,69,1,0,82,57,72,54,63,0,73,67,66,62,81,75,80,80,4,64,77,65,1,1,81,73,66,69,66,50,0,63,62,60,2,60,59,18,69,54,56,66,0,2,78,74,67,61,82,73,71,79,0,58,65,46,0,79,65,69,71,73,64,69,64,63,70,0,71,82,71,86,67,42,68,67,76,81,65,60,65,61,81,66,72,81,81,67,78,74,81,74,65,68,63,67,85,82,85,64,0,0,49,81,76,65,80,70,75,62,82,79,65,49,48,79,53,74,78,84,75,76,0,72,0,73,1,70,82,0,76,72,77,71,68,69,1,64,77,68,77,68,63,50,76,72,68,79,81,77,71,86,75,0,84,70,78,84,76,74,71,78,65,64,74,69,84,65,71,62,66,0,66,80,82,69,77,78,70,51,1,70,57,76,1,78,68,67,75,59,1,76,64,69,80,62,0,73,79,80,79,0,62,1,75,78,76,65,63,51,0,78,80,75,75,66,79,71,73,74,57,63,80,68,62,0,80,53,45,0,62,83,72,77,0,79,0,55,51,81,0,50,60,65,66,69,85,78,62,68,78,74,0,49,55,70,60,78,83,65,76,54,0,0,70,79,79,57,0,76,80,75,3,79,64,0,0,0,78,79,1,64,69,72,74,81,74,80,77,61,64,0,67,73,74,73,84,66,68,58,66,77,83,67,69,60,69,57,63,77,64,79,67,72,2,80,82,73,80,84,72,70,72,79,69,59,33,66,0,0,77,73,71,0,83,79,67,72,80,67,71,65,35,71,0,0,47,84,82,48,74,61,0,74,73,79,0,59,65,75,74,77,0,0,78,73,71,78,53,53,76,69,76,72,79,64,7,73,70,63,73,55,76,77,66,4,69,74,70,76,71,69,77,68,1,61,56,75,74],"hoverinfo":"y","type":"box","fillcolor":"rgba(139,0,0,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(51,51,51,1)","width":1.8897637795275593},"name":"Non-explicit","legendgroup":"Non-explicit","showlegend":true,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":37.260273972602747},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"How Does Explicit Level of Song Impact Song Popularity?","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,2.6000000000000001],"tickmode":"array","ticktext":["Explicit","Non-explicit"],"tickvals":[1,2],"categoryorder":"array","categoryarray":["Explicit","Non-explicit"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Explicit Songs","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-4.4500000000000002,93.450000000000003],"tickmode":"array","ticktext":["0","25","50","75"],"tickvals":[0,25,50,75],"categoryorder":"array","categoryarray":["0","25","50","75"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Popularity","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"20a0b8547bd":{"x":{},"y":{},"fill":{},"type":"box"}},"cur_data":"20a0b8547bd","visdat":{"20a0b8547bd":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p style="color:#6200EA;">
Findings:
</p>
<p style="color:#6200EA;">
The median popularity of explicit songs is 67 while that of non-explicit songs is 65. This shows that the explicit value of songs does contribute to its popularity slightly, as seen from the overall higher values found in explicit songs compared to non-explicit songs.
</p>
<p style="color:#6200EA;">
The difference in minimum values between the two plots is 7, but the differences in the maximum values is 1. Notably, the dispersion or inter-quartile range for values for explicit versus non-explicit songs are the same, at 17. This suggests that despite the significant difference in minimum values, it is likely that the non-explicit songs contain songs with low popularity levels that were not present in explicit songs.
</p>
<p style="color:#6200EA;">
Overall, I can conclude that popularity is not significantly affected by whether songs are explicit or not.
</p>
</section>
<section id="how-does-different-song-attributes-affect-popularity-numeric-variables" class="level2">
<h2 class="anchored" data-anchor-id="how-does-different-song-attributes-affect-popularity-numeric-variables"><u>3.0 How does different song attributes affect popularity? (Numeric variables)</u></h2>
<p>Firstly, let’s take a look at the distribution of different numeric song attributes using histograms. The attributes that I will be focusing on are Speechiness, Tempo, Loudness, Acousticness and Valence.</p>
</section>
<section id="distribution-of-different-song-attributes" class="level2">
<h2 class="anchored" data-anchor-id="distribution-of-different-song-attributes">3.1 Distribution of Different Song Attributes</h2>

<iframe height="400" width="100%" frameborder="no" src="https://edwxgo-yin0shuen-chin.shinyapps.io/App3/"> </iframe>
<p style="color:#6200EA;">
Findings:
</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">song_attribute</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">overall_shape</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">observation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Speechiness</td>
<td style="text-align: left;">Right-skewed</td>
<td style="text-align: left;">Most songs have low speechiness of below 0.1.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tempo</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Most songs have moderate tempo between 100 to 150BPM.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Loudness</td>
<td style="text-align: left;">Left-skewed</td>
<td style="text-align: left;">Most songs have moderate loudness of around -5dB.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Acousticness</td>
<td style="text-align: left;">Right-skewed</td>
<td style="text-align: left;">Most songs have low acousticness of 0.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Valence</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Valence is rather evenly split, with a higher proportion falling between 0.5 to 0.75.</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="individual-analysis-of-impact-of-song-attributes-on-popularity" class="level2">
<h2 class="anchored" data-anchor-id="individual-analysis-of-impact-of-song-attributes-on-popularity">3.2 Individual Analysis of Impact of Song Attributes on Popularity</h2>
</section>
<section id="effect-of-tempo-on-popularity" class="level2">
<h2 class="anchored" data-anchor-id="effect-of-tempo-on-popularity">3.2.1 Effect of Tempo on Popularity</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="datastory_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="effect-of-speechiness-on-popularity" class="level2">
<h2 class="anchored" data-anchor-id="effect-of-speechiness-on-popularity">3.2.2 Effect of Speechiness on Popularity</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="datastory_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="effect-of-loudness-on-popularity" class="level2">
<h2 class="anchored" data-anchor-id="effect-of-loudness-on-popularity">3.2.3 Effect of Loudness on Popularity</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="datastory_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="effect-of-acousticness-on-popularity" class="level2">
<h2 class="anchored" data-anchor-id="effect-of-acousticness-on-popularity">3.2.4 Effect of Acousticness on Popularity</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="datastory_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="effect-of-valence-on-popularity" class="level2">
<h2 class="anchored" data-anchor-id="effect-of-valence-on-popularity">3.2.3 Effect of Valence on Popularity</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="datastory_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>